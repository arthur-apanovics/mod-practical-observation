define(["jquery","core/ajax","core/notification","mod_observation/Sortable"],function(a,b,c,d){return{init:function(){var e="mainTaskList",f="nested-criteria",g=function(b){function c(b,c){return a(c).data("sequence")<a(b).data("sequence")?1:-1}a(b).find("li").sort(c).appendTo(b)},h=function(a){var d=a.oldIndex+1,h=a.newIndex+1;if(d!==h){var i=null,j=null;if(a.target.className.trim()===f)i="mod_observation_criteria_update_sequence",j={criteriaid:a.item.getAttribute("criteriaid"),newsequence:h};else if(a.target.id.trim()===e)i="mod_observation_task_update_sequence",j={taskid:a.item.getAttribute("taskid"),newsequence:h};else{try{g(a.target)}catch(k){}console.error("Unsupported element passed for sorting",a.target),c.exception(new Error("Sorry, something went wrong. Please report this problem to your superior."))}b.call([{methodname:i,args:j,done:console.info,fail:function(b){g(a.target),c.exception(b)}}],!0,!0)}};d.create(document.getElementById(e),{handle:".my-handle",animation:150,onEnd:h});for(var i=document.getElementsByClassName(f),j=0;j<i.length;j++)new d(i[j],{group:{name:f,pull:!1},animation:150,fallbackOnBody:!0,swapThreshold:.65,handle:".my-handle",onEnd:h})}}});